-- ============================================================
-- 7. generated-images 버킷을 public으로 변경
-- ============================================================
-- 이유: PPT 생성 워크플로우에서 E2B 샌드박스가 이미지를 다운로드할 때
-- signed URL의 긴 토큰을 LLM이 정확히 복사하지 못하는 문제 해결.
-- public 버킷으로 변경하면 /storage/v1/object/public/ URL로 접근 가능.
-- 이미지 경로에 UUID가 포함되어 있어 URL을 모르면 접근 불가하므로 보안 문제 없음.
-- ============================================================

UPDATE storage.buckets 
SET public = true 
WHERE id = 'generated-images';
